# Introduction

> Cve search image with authentication and authorization support through the integration for keycloak as an IDP.
> The following roles have been defined to protect web and apis endpoints:
- CVE_SEARCH_ADMINS: Access admin apis and cve-search configuration from web console
- CVE_SEARCH_USERS: Access public apis
> The web endpoints are protected with the annotation: @oidc.require_login
> The apis endpoints are protected with the annotation: @oidc.accept_token(require_token=True)

## Table of Contents

- [Installation](#installation)
- [Features](#features)
- [Contributing](#contributing)
- [Author](#author)
- [License](#license)


---

## Installation

- To use the cve-search container you will have to dockerize a [mongo db](https://gitlab.thalesdigital.io/dssp-ivv-devsecops/ivv-projects/docker/cve-sec/mongo) and a [redis server](https://gitlab.thalesdigital.io/dssp-ivv-devsecops/ivv-projects/docker/cve-sec/redis). Once dockerized, you will have to deploy the [mongo db](https://gitlab.thalesdigital.io/dssp-ivv-devsecops/ivv-projects/helm/cve-sec/mongo) and the [redis server](https://gitlab.thalesdigital.io/dssp-ivv-devsecops/ivv-projects/helm/cve-sec/redis) and edit the configuritation.ini file to use these deployments. Afterwards, you can run the container as follows:
```
docker run -e PYTHONUNBUFFERED=TRUE \
           -e WORKER_SIZE=1\
           -p 5000:5000 \
           -it --rm IMAGE_TAG
          
---

## Features
> src/web/auth: Handle logout.
> src/run.py: OIDC Configuration.
> src/web/helpers/is_user_admin: Verify user role to grant access to admin web and apis endpoints
---

## Contributing

> To get started:

### Step 1

- **Option 1**
    - 🍴 Fork this repo!

- **Option 2**
    - 👯 Clone this repo to your local machine using `git@github.com:kawtar01/cve-search.git`

### Step 2

- **HACK AWAY!** 🔨🔨🔨

### Step 3

- 🔃 Create a new pull request.

---

## Author

- Kawtar Ahaggach <a>ahaggach@gmail.com</a>

---


## License

- cve-search is free software released under the "GNU Affero General Public License v3.0"