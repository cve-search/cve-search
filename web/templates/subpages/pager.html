<!-- 
You can change the length to however long you want.
For the best result, use an odd number
 -->
{% set length = 5 %}
{% set maxnumpages = (cvecount/pageLength)|int+1 %}
{% if maxnumpages <= length %}
  {% set length = maxnumpages %}
{% endif %}

<!-- Don't edit the variables below -->
{% set page = (r/pageLength)|int %}
{% if maxnumpages > length %}
  {% set middle = (length/2)|int+1 %}
{% else %}
  {% set middle = (maxnumpages/2)|int+1 %}
{% endif %}

{% if length > maxnumpages or length == maxnumpages %}
  {% if page < middle %}
    {% set pre = page %} 
    {% set post = maxnumpages-page %}
  {% else %}
    {% set pre = page %}
    {% set post = 0 %}
  {% endif %}
{% else %} 
  {% if page < middle %}
    {% set pre = page %}
    {% set post = length-page %}
  {% elif maxnumpages-page > middle-1 %}
    {% set pre = middle-1 %}
    {% set post = middle %}  
  {% elif maxnumpages-page == middle-1 %}
    {% set pre = middle %}
    {% set post = middle-1 %}
  {% else %}
    {% set pre = length %}
    {% set post = 0 %}
  {% endif %}
{% endif %}

<div class="pagerdiv">
  <p>Total hits in database: {{cvecount}}</p>
  <nav>
    <ul class="pagination">
      <li {% if page == 0 %}class="disabled"{% endif %}>
        {% if page > 0 %}
        <a href="javascript:previous({{r}}-50)" aria-label="Previous">
        {% endif %}
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      {% for n in range(pre,0,-1) %}
        <li><a href="javascript:previous({{r - n * pageLength}})">{{page - n+1}}</a></li>
      {% endfor %}
      <li class="active">
        <span>{{page+1}} <span class="sr-only">(current)</span></span>
      </li>
      {% for n in range(1,post) %}
        <li><a href="javascript:next({{r + n * pageLength}})">{{page + n+1}}</a></li>
      {% endfor %}
      <li {% if page == maxnumpages-1 %} class="disabled"{% endif %}>
        {% if page < maxnumpages-1 %}
        <a href="javascript:next({{r}}+50)" aria-label="Next">
        {% endif %}
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
</div>
